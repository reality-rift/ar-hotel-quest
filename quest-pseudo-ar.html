<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 3 Pseudo-AR Hotel</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
        }

        model-viewer {
            width: 100%;
            height: 100%;
            background: transparent;
        }

        .ar-mode {
            background: rgba(0, 0, 0, 0.1) !important;
        }

        .control-panel {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            z-index: 1000;
            max-width: 90%;
        }

        .ar-toggle {
            background: linear-gradient(45deg, #00d4aa 0%, #00a085 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 18px 36px;
            font-size: 18px;
            font-weight: 700;
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0, 212, 170, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .ar-toggle:hover {
            transform: translateX(-50%) translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 212, 170, 0.6);
        }

        .hand-controls {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 14px;
            max-width: 90%;
            z-index: 1000;
        }

        .scale-controls {
            position: absolute;
            top: 100px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
        }

        .scale-button {
            display: block;
            width: 50px;
            height: 50px;
            margin: 10px 0;
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            cursor: pointer;
        }

        .ar-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 500;
        }

        .hand-indicator {
            position: absolute;
            width: 40px;
            height: 40px;
            background: rgba(0, 212, 170, 0.8);
            border-radius: 50%;
            border: 2px solid white;
            display: none;
            z-index: 600;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }

        .pinch-indicator {
            background: rgba(255, 100, 100, 0.8) !important;
            animation: none !important;
            transform: scale(1.5) !important;
        }
    </style>
</head>
<body>
    <div class="control-panel" id="controlPanel">
        <strong id="statusText">ü§≤ Hand Tracking Ready!</strong><br>
        <span id="modeText">Regular 3D View ‚Ä¢ Hands work here</span>
    </div>

    <div class="scale-controls">
        <strong>Scale</strong>
        <button class="scale-button" onclick="scaleModel(1.2)">+</button>
        <button class="scale-button" onclick="scaleModel(0.8)">-</button>
        <button class="scale-button" onclick="resetModel()">‚åÇ</button>
    </div>

    <model-viewer
        id="hotelModel"
        src="model.glb"
        camera-controls
        shadow-intensity="1"
        exposure="1"
        camera-orbit="0deg 70deg 15m"
        scale="0.05 0.05 0.05"
        interaction-prompt="none"
        auto-rotate
        auto-rotate-delay="5000"
        loading="eager"
        reveal="auto"
        alt="Hotel 3D Model">
    </model-viewer>

    <div class="ar-overlay" id="arOverlay">
        <div class="hand-indicator" id="leftHandIndicator"></div>
        <div class="hand-indicator" id="rightHandIndicator"></div>
    </div>

    <button class="ar-toggle" id="arToggle" onclick="toggleARMode()">
        üéØ Enter AR-Style Mode
    </button>

    <div class="hand-controls" id="handControls">
        <strong>Quest 3 Hand Controls:</strong><br>
        üëê <strong>Pinch & Drag:</strong> Rotate hotel around<br>
        ü§è <strong>Two-hand pinch:</strong> Scale up/down<br>
        ‚úã <strong>Point:</strong> Navigate camera view<br>
        üîÑ <strong>Hand gestures:</strong> Natural interaction
    </div>

    <script>
        const modelViewer = document.getElementById('hotelModel');
        const controlPanel = document.getElementById('controlPanel');
        const statusText = document.getElementById('statusText');
        const modeText = document.getElementById('modeText');
        const arToggle = document.getElementById('arToggle');
        const handControls = document.getElementById('handControls');
        const arOverlay = document.getElementById('arOverlay');
        const leftHandIndicator = document.getElementById('leftHandIndicator');
        const rightHandIndicator = document.getElementById('rightHandIndicator');

        let arModeActive = false;
        let currentScale = 0.05;
        let handTrackingActive = false;

        // Simulate hand tracking indicators
        function simulateHandTracking() {
            if (handTrackingActive) {
                // Random hand positions for demo
                const leftHand = {
                    x: Math.random() * window.innerWidth * 0.3 + 50,
                    y: Math.random() * window.innerHeight * 0.3 + 100
                };
                const rightHand = {
                    x: Math.random() * window.innerWidth * 0.3 + window.innerWidth * 0.6,
                    y: Math.random() * window.innerHeight * 0.3 + 100
                };

                leftHandIndicator.style.left = leftHand.x + 'px';
                leftHandIndicator.style.top = leftHand.y + 'px';
                leftHandIndicator.style.display = 'block';

                rightHandIndicator.style.left = rightHand.x + 'px';
                rightHandIndicator.style.top = rightHand.y + 'px';
                rightHandIndicator.style.display = 'block';
            }
        }

        // Toggle AR-style mode
        function toggleARMode() {
            arModeActive = !arModeActive;
            
            if (arModeActive) {
                // Enter AR-style mode
                document.body.style.background = 'transparent';
                modelViewer.classList.add('ar-mode');
                modelViewer.setAttribute('auto-rotate', 'false');
                modelViewer.setAttribute('scale', '0.08 0.08 0.08');
                modelViewer.setAttribute('camera-orbit', '0deg 60deg 8m');
                
                arToggle.textContent = 'üö™ Exit AR Mode';
                statusText.innerHTML = 'üéØ AR-Style Active!';
                modeText.innerHTML = 'Immersive mode ‚Ä¢ Hand tracking simulated';
                
                // Start hand tracking simulation
                handTrackingActive = true;
                setInterval(simulateHandTracking, 100);
                
                // Hide some UI
                handControls.style.opacity = '0.7';
                
            } else {
                // Exit AR-style mode
                document.body.style.background = '#000';
                modelViewer.classList.remove('ar-mode');
                modelViewer.setAttribute('auto-rotate', 'true');
                modelViewer.setAttribute('scale', '0.05 0.05 0.05');
                modelViewer.setAttribute('camera-orbit', '0deg 70deg 15m');
                
                arToggle.textContent = 'üéØ Enter AR-Style Mode';
                statusText.innerHTML = 'ü§≤ Hand Tracking Ready!';
                modeText.innerHTML = 'Regular 3D View ‚Ä¢ Hands work here';
                
                // Stop hand tracking simulation
                handTrackingActive = false;
                leftHandIndicator.style.display = 'none';
                rightHandIndicator.style.display = 'none';
                
                // Show UI
                handControls.style.opacity = '1';
            }
        }

        // Scale model functions
        function scaleModel(factor) {
            currentScale *= factor;
            currentScale = Math.max(0.01, Math.min(0.5, currentScale)); // Limit scale
            modelViewer.setAttribute('scale', `${currentScale} ${currentScale} ${currentScale}`);
        }

        function resetModel() {
            currentScale = arModeActive ? 0.08 : 0.05;
            modelViewer.setAttribute('scale', `${currentScale} ${currentScale} ${currentScale}`);
            modelViewer.setAttribute('camera-orbit', arModeActive ? '0deg 60deg 8m' : '0deg 70deg 15m');
        }

        // Enhanced touch controls for Quest
        let touchData = { active: false, startX: 0, startY: 0 };

        modelViewer.addEventListener('touchstart', (e) => {
            if (e.touches.length === 1) {
                touchData.active = true;
                touchData.startX = e.touches[0].clientX;
                touchData.startY = e.touches[0].clientY;
                
                // Simulate pinch feedback
                if (Math.random() > 0.5) {
                    leftHandIndicator.classList.add('pinch-indicator');
                } else {
                    rightHandIndicator.classList.add('pinch-indicator');
                }
            } else if (e.touches.length === 2) {
                // Two finger gesture - simulate two-hand scaling
                leftHandIndicator.classList.add('pinch-indicator');
                rightHandIndicator.classList.add('pinch-indicator');
            }
        });

        modelViewer.addEventListener('touchmove', (e) => {
            if (touchData.active && e.touches.length === 2) {
                // Simulate two-hand scaling
                const distance = Math.sqrt(
                    Math.pow(e.touches[0].clientX - e.touches[1].clientX, 2) +
                    Math.pow(e.touches[0].clientY - e.touches[1].clientY, 2)
                );
                
                // Use distance to scale (simple approximation)
                const newScale = Math.max(0.02, Math.min(0.15, distance / 1000));
                modelViewer.setAttribute('scale', `${newScale} ${newScale} ${newScale}`);
                currentScale = newScale;
            }
        });

        modelViewer.addEventListener('touchend', (e) => {
            touchData.active = false;
            
            // Remove pinch indicators
            leftHandIndicator.classList.remove('pinch-indicator');
            rightHandIndicator.classList.remove('pinch-indicator');
        });

        // Detect Quest browser
        const isQuest = /OculusBrowser/.test(navigator.userAgent);
        if (isQuest) {
            statusText.innerHTML = 'ü•Ω Quest 3 Detected!';
            modeText.innerHTML = 'Hand tracking optimized for Quest';
        }

        // Model loading
        modelViewer.addEventListener('load', () => {
            console.log('Hotel model loaded - ready for interaction!');
        });

        console.log('Quest Pseudo-AR initialized - use AR-Style mode for immersive experience!');
    </script>
</body>
</html>